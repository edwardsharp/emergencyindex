<%= search_form_for @users_q, url: '/admin/users-list', remote: true, class: 'row' do |f| %>
  <div class="input-field-fix col s3 m2 l2">
    <%= f.check_box :admin_true %>
    <%= f.label :admin_true, 'Admins' %>
  </div>
  <div class="input-field col s4 m6 l7">
    <%= f.search_field :name_or_email_cont %>
    <%= f.label :name_or_email_cont, "Search" %>
  </div>
  <div class="input-field col s5 m4 l3">
    <button class="btn waves-effect waves-light tooltipped" type="submit" name="submit" data-tooltip="Search Users">
      <i class="material-icons">search</i>
    </button>
    <button id="new-user-modal-trigger" class="waves-effect waves-light btn tooltipped" data-tooltip="Create New User"><i class="material-icons">person_add</i></button>
  </div>

<% end %>



<div id="users-list">
  <%= render 'users_list' %>
</div>

<div id="new-user-modal" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Create New User</h4>
    <p>A bunch of text</p>
  </div>
  <div class="modal-footer">
    <button class="modal-action modal-close waves-effect btn-flat btn">Save</button>
  </div>
</div>

<script type="text/javascript">
$(document).on('turbolinks:load', function() {
  //jesus-fuck turbolinkz/jquery (!!!)
  function showNewUserModal() {
    $('#new-user-modal').modal();
    $('#new-user-modal').modal('open');
  }
  if($('#new-user-modal-trigger').length > 0){
    $('#new-user-modal-trigger').off('click', showNewUserModal);
    $('#new-user-modal-trigger').on('click', showNewUserModal);
  }

});
</script>
